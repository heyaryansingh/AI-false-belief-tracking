---
phase: 02-helper-models
plan: 02
type: execute
depends_on: ["02-01"]
files_modified: [src/bsa/agents/helper/reactive.py, src/bsa/agents/helper/__init__.py]
domain: python
---

<objective>
Implement reactive helper baseline that reacts to visible objects without goal or belief inference.

Purpose: Create the simplest baseline helper that fetches objects when they're visible and needed, without inferring goals or tracking beliefs. This serves as a comparison point for more sophisticated helpers.
Output: ReactiveHelper class implementing HelperAgent interface with simple reactive policy.
</objective>

<execution_context>
~/.cursor/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/bsa/common/types.py
@src/bsa/agents/helper/base.py
@src/bsa/envs/gridhouse/tasks.py
@.planning/phases/02-helper-models/02-01-SUMMARY.md

**Established patterns:**
- HelperAgent interface from Plan 02-01
- Action enum for actions
- Observation dataclass for observations
- Type hints and docstrings throughout

**Key decisions:**
- Reactive helper has no belief state (get_belief_state returns None)
- Simple policy: react to visible objects, fetch if needed
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement reactive helper class</name>
  <files>src/bsa/agents/helper/reactive.py</files>
  <action>
Create `ReactiveHelper` class in `src/bsa/agents/helper/reactive.py` that implements `HelperAgent` interface:

1. **Class structure:**
   - Inherit from `HelperAgent`
   - No internal state (no belief tracking, no goal inference)
   - Simple reactive policy

2. **plan_action method:**
   - Input: `observation: Observation`, optional `episode_step: Optional[EpisodeStep]`
   - Policy: 
     - If holding an object, move towards goal location (if known from episode_step) or wait
     - If object is visible and nearby, pick it up
     - If object is in visible container, open container
     - Otherwise, move towards visible objects or explore
   - Return: `Action` enum value
   - Use simple heuristics (distance-based, similar to human agent policies but reactive to observations only)

3. **update_belief method:**
   - No-op (reactive helper doesn't track beliefs)
   - Empty implementation: `pass`

4. **get_belief_state method:**
   - Return `None` (no belief state)

5. **detect_false_belief method:**
   - Return `False` (reactive helper cannot detect false beliefs)

6. **Type hints and docstrings:** Full type hints, docstrings explaining reactive policy

7. **Design considerations:**
   - Policy should be simple and deterministic (no randomness unless needed for exploration)
   - React only to what's visible in observation
   - Don't use episode_step for planning (only for debugging), but can use it to know goal locations if needed
   - Follow similar distance/room checking patterns as human agent policies
  </action>
  <verify>python -c "from src.bsa.agents.helper.reactive import ReactiveHelper; from src.bsa.agents.helper import HelperAgent; h = ReactiveHelper(); assert isinstance(h, HelperAgent); assert h.get_belief_state() is None; print('Reactive helper created successfully')"</verify>
  <done>ReactiveHelper class exists, implements HelperAgent interface, plan_action returns valid Action, get_belief_state returns None, no errors on instantiation.</done>
</task>

<task type="auto">
  <name>Task 2: Export reactive helper from module</name>
  <files>src/bsa/agents/helper/__init__.py</files>
  <action>
Update `src/bsa/agents/helper/__init__.py` to also export `ReactiveHelper` from `reactive.py`. Keep existing `HelperAgent` export.
</action>
  <verify>python -c "from src.bsa.agents.helper import ReactiveHelper, HelperAgent; print('Exports successful')"</verify>
  <done>ReactiveHelper can be imported from src.bsa.agents.helper module alongside HelperAgent.</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `python -c "from src.bsa.agents.helper import ReactiveHelper"` succeeds
- [ ] `python -c "from src.bsa.agents.helper.reactive import ReactiveHelper; h = ReactiveHelper(); assert h.get_belief_state() is None"` passes
- [ ] ReactiveHelper.plan_action returns valid Action enum values
- [ ] Type hints and docstrings complete
- [ ] Policy is simple and reactive (no goal/belief inference)
</verification>

<success_criteria>

- ReactiveHelper class implements HelperAgent interface
- Reactive policy reacts to visible objects only
- get_belief_state returns None
- Exported from helper module
- No errors on instantiation or method calls
  </success_criteria>

<output>
After completion, create `.planning/phases/02-helper-models/02-02-SUMMARY.md`:

# Phase 2 Plan 2: Reactive Helper Baseline Summary

**Implemented reactive helper baseline without goal or belief inference**

## Accomplishments

- Created ReactiveHelper class implementing HelperAgent interface
- Implemented simple reactive policy (reacts to visible objects)
- No belief tracking (get_belief_state returns None)
- Exported from helper module

## Files Created/Modified

- `src/bsa/agents/helper/reactive.py` - ReactiveHelper class
- `src/bsa/agents/helper/__init__.py` - Export ReactiveHelper

## Decisions Made

- Reactive policy: fetch visible objects, open containers, move towards visible objects
- No goal inference (doesn't know what human is trying to accomplish)
- No belief tracking (cannot detect false beliefs)
- Simple deterministic heuristics

## Issues Encountered

[None or list issues]

## Next Step

Ready for 02-03-PLAN.md (Goal inference module + Goal-only helper)
</output>
